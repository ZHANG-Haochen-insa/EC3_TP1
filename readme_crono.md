# 秒表项目 (Stopwatch Project) - 架构说明

本项目是在 Nexys A7 FPGA 开发板上实现的VHDL数字秒表。

## 功能
-   **计时**: 实现一个可以启动、停止、复位和继续的秒表。
-   **显示**:
    -   使用10个LED灯以“跑马灯”效果显示十分之一秒。
    -   使用两个7段数码管来显示秒的个位数和十位数（00-59秒）。

---

## 文件结构

本项目由以下几个VHDL模块和一个约束文件组成：

-   `STOPWATCH.VHD`: **顶层实体**。负责将所有子模块连接在一起，构成完整的秒表系统。
-   `Display_Mux.vhd`: **显示复用模块**。我们编写的核心模块，用于驱动两个7段数码管，让它们分时显示两个不同的数字。
-   `State_Machine.VHD`: **状态机**。控制秒表的核心逻辑，管理`启动`、`停止`、`运行中`和`已复位`等状态。
-   `Clk_Div.VHD`: **时钟分频器**。将板载的100MHz高速时钟分频，为状态机和计数器提供一个较慢的工作时钟。
-   `tenths.VHD`: **十分之一秒计数器**。一个10位计数器，其输出直接连接到10个LED灯，实现跑马灯效果。它每计数一整轮（一秒），就产生一个进位信号。
-   `cnt60.VHD`: **60进制计数器**。接收来自`tenths`模块的进位信号，进行秒（0-59）的累加，并输出BCD码格式的个位数和十位数。
-   `HEX2LED.VHD`: **BCD到7段码转换器**。这是一个辅助模块，被`Display_Mux`在内部调用，负责将4位的BCD数字（如`0101`代表5）转换为7段数码管能识别的显示信号。
-   `stopwatch.xdc`: **引脚约束文件**。定义了VHDL代码中的端口（如时钟、按钮、LED、数码管）与FPGA芯片物理引脚之间的对应关系。

---

## 系统架构

系统的数据流和控制流如下：

1.  **时钟**: 外部100MHz时钟 (`CLK`) 首先进入 `Clk_Div` 模块，产生一个较慢的 `divided_clk`，作为大部分逻辑的工作时钟。
2.  **控制**: `RESET` (复位) 和 `STRTSTOP` (启停) 按钮的信号与 `divided_clk` 一同送入 `State_Machine`。状态机根据用户的操作，输出 `clkenable` (计数使能) 和 `rstint` (内部复位) 两个控制信号。
3.  **计数**:
    -   `tenths` 模块在 `clkenable` 为高电平时，以 `divided_clk` 的频率计数，并将计数值输出到 `TENTHSOUT` (连接LED)。当它数满一秒，会输出一个脉冲信号 `term_count`。
    -   `cnt60` 模块在 `clkenable` 为高电平且接收到 `term_count` 脉冲时，计数值加一。它将当前的秒数分解为个位 (`lsbcnt`) 和十位 (`msbcnt`) 的BCD码。
4.  **显示**:
    -   `lsbcnt` 和 `msbcnt` 两个BCD码被送入 `Display_Mux` 模块。
    -   `Display_Mux` 模块利用高速主时钟 `CLK`，以人眼无法察觉的速度，在数码管1上显示个位秒，在数码管2上显示十位秒。它最终输出驱动数码管所需的段选信号 `seg` 和位选信号 `an`。

---

## 如何使用

项目烧录到NEXYS A7开发板后，通过以下按钮进行交互：

-   **`BTNU` (引脚 M18)**: 按下此按钮可**复位**秒表，所有计时和显示都将归零。
-   **`BTNC` (引脚 N17)**:
    -   **第一次**按下: **开始**计时。
    -   在计时过程中**再次**按下: **暂停**计时。
    -   在暂停状态下**再次**按下: **继续**计时。
