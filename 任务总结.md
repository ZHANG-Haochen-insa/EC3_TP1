# VHDL 实验任务总结 (TP VHDL E1 2025)

根据 `TP VHDL E1 2025.pdf` 文件的内容，你需要完成以下两个核心任务。整个实验基于 **VIVADO 2025.1** 开发环境和 **NEXYS-A7** FPGA 开发板。

---

### 任务一：实现一个4位计数器

这个任务的目的是让你熟悉 NEXYS A7 开发板和 Vivado 的基本编程流程。

**功能要求：**
1.  设计一个4位的二进制计数器。
2.  计数器的每一个比特（bit）都连接到开发板上的一个LED灯。
3.  使用一个开关（switch）来控制计数器的行为：
    *   **递增** (increment)
    *   **递减** (decrement)

**步骤：**
1.  在 Vivado 中创建一个名为 `counter_4bits` 的项目。
2.  定义模块的输入/输出（E/S）：
    *   `CLOCK`: 时钟信号输入
    *   `DIRECTION`: 方向控制信号输入（来自开关）
    *   `COUNT_OUT[3:0]`: 4位的计数输出（连接到LED）
3.  使用 Vivado 提供的 VHDL 模板 (`Language Templates`) 来生成一个基础的计数器代码，并将其插入到 `counter_4bits.vhd` 文件中。
4.  根据实验指导书中的代码片段修改 VHDL 文件，以实现递增/递减功能。
5.  创建一个仿真文件 `tb_counter_4bits` 来进行功能性仿真，验证你的设计是否正确。
6.  在 Vivado 中定义引脚约束（I/O Floorplaner），将 VHDL 代码中的输入/输出端口连接到 FPGA 芯片的物理引脚上（例如 `CLK` 连接到 `E3`，`DIRECTION` 连接到 `J15` 等）。
7.  生成比特流（bitstream）文件并将其烧录到 FPGA 中。
8.  在开发板上观察4位计数器的实际运行情况，并思考可以如何改进它。

---

### 任务二：实现一个秒表

这个任务的目标是修改一个已有的项目，以实现一个功能更复杂的秒表，并解决显示器复用的问题。

**功能要求：**
1.  **时间显示**：
    *   在LED灯条上以“跑马灯”的形式显示**十分之一秒** (`tenths of a second`)。
    *   在两个7段数码管上分别显示**秒** (`seconds`) 和 **十秒** (`tens of seconds`)。
2.  **控制功能**：
    *   一个按钮用于**清零** (Reset)。
    *   另一个按钮用于**启动** (start)、**停止** (stop) 和 **继续** (resume) 计时。

**主要挑战：**
修改现有项目，使其能够在 NEXYS-A7 开发板上运行，核心是**管理7段数码管的复用（multiplexing）**。

**步骤：**
1.  解压提供的 `TP_E1.zip` 文件。
2.  创建一个名为 `stopwatch.xpr` 的项目。
3.  将所有提供的 VHDL 源文件（`.vhd`）添加到项目中。
4.  **研究状态机**：分析 `State_Machine.VHD` 的代码，绘制出状态转换图，并判断它是 **Moore** 型还是 **Mealy** 型状态机。
5.  **编写复用逻辑**：编写新的 VHDL 代码，实现一个多路复用器（multiplexer），用于在不同的7段数码管上交替显示“秒”和“十秒”的数值。
6.  **修改主文件**：修改 `stopwatch.VHD` 文件，将你编写的复用器集成进去。最终，秒表的“秒”和“十秒”将使用数码管1和2，而数-码管3到8将被禁用。
7.  **分配引脚**：为秒表项目的所有输入（时钟、按钮）和输出（LED、数码管）分配正确的FPGA引脚。
8.  **生成并编程**：生成比特流文件并将其下载到 NEXYS-A7 开发板上进行测试。
